openapi: "3.0.3"
info:
  title: 快组校园 API v2
  description: |
    快组校园 RESTful API v2 - 大学生组队与人才匹配平台

    ## 核心规约
    - URL路径：全小写，单词间用中划线分隔，只使用名词复数
    - JSON字段：严格使用小驼峰(camelCase)
    - 鉴权方式：Header携带 `Authorization: Bearer {token}`
  version: 2.0.0
  contact:
    name: 快组校园团队

servers:
  - url: http://localhost:8080/api/v2
    description: 本地开发
  - url: https://api.zhaoxiaokai.xyz/api/v2
    description: 生产环境
  - url: https://dev-pay.darker233.top/api/v2
    description: 开发环境

tags:
  - name: Auth
    description: 认证相关接口
  - name: Users
    description: 用户管理接口
  - name: Projects
    description: 项目大厅接口
  - name: ProjectApplications
    description: 项目申请管理接口
  - name: TalentProfiles
    description: 人才库接口
  - name: OliveBranches
    description: 橄榄枝邀请接口
  - name: Products
    description: 商品管理接口
  - name: Orders
    description: 订单与支付接口
  - name: Dictionaries
    description: 基础数据字典接口
  - name: Commons
    description: 通用接口

security:
  - bearerAuth: []

paths:
  # ==================== 认证模块 ====================
  /auth/login/wechat:
    post:
      tags: [Auth]
      summary: 微信一键登录/注册
      description: 后端自动判断是注册还是登录，返回Token
      operationId: loginWithWechat
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [code]
              properties:
                code:
                  type: string
                  description: 微信登录临时凭证code
                  example: "0a1b2c3d4e5f"
      responses:
        "200":
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/LoginResponse"

  # ==================== 用户模块 ====================
  /users/me:
    get:
      tags: [Users]
      summary: 获取当前用户信息
      operationId: getCurrentUser
      responses:
        "200":
          description: 成功获取用户信息
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserVO"
    put:
      tags: [Users]
      summary: 更新个人资料
      operationId: updateCurrentUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserDTO"
      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserVO"

  /users/me/certification:
    post:
      tags: [Users]
      summary: 提交学生认证
      operationId: submitCertification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [authImgUrl]
              properties:
                authImgUrl:
                  type: string
                  description: 学生证照片URL
                  example: "https://cdn.example.com/student/123.jpg"
      responses:
        "200":
          description: 提交成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BaseResponse"

  /users/me/olive-branches:
    get:
      tags: [OliveBranches]
      summary: 查看我收到的橄榄枝邀请
      description: 人才视角查看收到的邀请
      operationId: getMyReceivedOliveBranches
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: status
          in: query
          schema:
            $ref: "#/components/schemas/OliveBranchStatus"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/OliveBranchPageResponse"
  /users/me/sent-olive-branches:
    get:
      tags: [OliveBranches]
      summary: 查看我发出的橄榄枝邀请
      description: 企业视角查看发出的邀请
      operationId: getMySentOliveBranches
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: status
          in: query
          schema:
            $ref: "#/components/schemas/OliveBranchStatus"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/OliveBranchPageResponse"

  # ==================== 项目大厅模块 ====================
  /projects:
    get:
      tags: [Projects]
      summary: 项目列表/搜索
      operationId: listProjects
      security: []
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: keyword
          in: query
          description: 关键词搜索
          schema:
            type: string
        - name: schoolId
          in: query
          description: 学校ID筛选
          schema:
            type: integer
        - name: status
          in: query
          description: 项目状态筛选
          schema:
            $ref: "#/components/schemas/ProjectStatus"
        - name: direction
          in: query
          description: 项目方向筛选
          schema:
            $ref: "#/components/schemas/Direction"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProjectPageResponse"
    post:
      tags: [Projects]
      summary: 发布新项目
      description: 创建后状态默认为"待审核"
      operationId: createProject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectDTO"
      responses:
        "200":
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProjectVO"

  /projects/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 项目ID
    get:
      tags: [Projects]
      summary: 获取项目详情
      description: 返回包含浏览量、队长信息的数据
      operationId: getProject
      security: []
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProjectDetailVO"
    put:
      tags: [Projects]
      summary: 修改项目信息
      description: 仅队长可操作
      operationId: updateProject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectDTO"
      responses:
        "200":
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProjectVO"
    delete:
      tags: [Projects]
      summary: 删除/下架项目
      description: 逻辑删除
      operationId: deleteProject
      responses:
        "200":
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BaseResponse"

  /projects/my:
    parameters:
      - $ref: "#/components/parameters/PageParam"
      - $ref: "#/components/parameters/SizeParam"
      - name: status
        in: query
        schema:
          $ref: "#/components/schemas/ProjectStatus"
    get:
      tags: [ProjectApplications]
      summary: 列出我组建的项目
      description: 返回组队者的项目数据
      operationId: listMyProjects
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          list:
                            type: array
                            items:
                              $ref: "#/components/schemas/ProjectVO"
                          pageInfo:
                            $ref: "#/components/schemas/PageInfo"
        

  /projects/{id}/applications:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 项目ID
    get:
      tags: [ProjectApplications]
      summary: 查看某项目的申请列表
      description: 仅队长可见
      operationId: listProjectApplications
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: status
          in: query
          schema:
            $ref: "#/components/schemas/ApplicationStatus"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ApplicationPageResponse"
    post:
      tags: [ProjectApplications]
      summary: 申请加入项目
      description: 触发订阅消息逻辑
      operationId: applyToProject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                applyReason:
                  type: string
                  description: 自我介绍/申请理由
                  example: "我有2年的Java开发经验..."
                contact:
                  type: string
                  description: 联系方式
                  example: "微信: example123"
      responses:
        "200":
          description: 申请成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProjectApplicationVO"

  /project-applications/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 申请ID
    patch:
      tags: [ProjectApplications]
      summary: 审核申请
      description: 队长审核用户的加入申请
      operationId: reviewApplication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  $ref: "#/components/schemas/ApplicationStatus"
                replyMsg:
                  type: string
                  description: 队长回复(通过或拒绝时填写)
      responses:
        "200":
          description: 操作成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BaseResponse"
                
  /project-applications/my:
    get:
      tags: [ProjectApplications]
      summary: 获取我的申请
      operationId: listMyApplications
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: status
          in: query
          schema:
            $ref: "#/components/schemas/ApplicationStatus"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ApplicationPageResponse"

  # ==================== 人才库模块 ====================
  /talent-profiles:
    get:
      tags: [TalentProfiles]
      summary: 搜索人才库
      operationId: listTalentProfiles
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: majorId
          in: query
          description: 专业ID筛选
          schema:
            type: integer
        - name: keyword
          in: query
          description: 关键词搜索
          schema:
            type: string
        - name: schoolId
          in: query
          description: 学校ID筛选
          schema:
            type: integer
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/TalentProfilePageResponse"
    post:
      tags: [TalentProfiles]
      summary: 发布/修改我的人才卡片
      description: 只有发布了才能被搜到
      operationId: upsertTalentProfile
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpsertTalentProfileDTO"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/TalentProfileVO"

  /talent-profiles/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 人才档案ID
    get:
      tags: [TalentProfiles]
      summary: 查看人才详情
      description: 需数据脱敏，除非已建立联系
      operationId: getTalentProfile
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/TalentProfileDetailVO"

  # ==================== 橄榄枝模块 ====================
  /olive-branches:
    post:
      tags: [OliveBranches]
      summary: 发送橄榄枝(邀请)
      description: |
        后端逻辑：检查余额 -> 扣除次数 -> 发送通知
        余额不足返回错误码4002
      operationId: sendOliveBranch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendOliveBranchDTO"
      responses:
        "200":
          description: 发送成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/OliveBranchVO"

  /olive-branches/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 橄榄枝ID
    patch:
      tags: [OliveBranches]
      summary: 处理邀请(接受/拒绝)
      operationId: handleOliveBranch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [action]
              properties:
                action:
                  type: string
                  enum: [ACCEPT, REJECT]
                  description: 操作类型
      responses:
        "200":
          description: 操作成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BaseResponse"

  # ==================== 商品模块 ====================
  /products:
    get:
      tags: [Products]
      summary: 获取商品列表
      description: 获取所有可购买的商品
      operationId: listProducts
      security: []
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ProductVO"

  /products/{id}:
    get:
      tags: [Products]
      summary: 获取商品详情
      operationId: getProductDetail
      security: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 商品ID
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ProductVO"

  # ==================== 订单与支付模块 ====================
  /orders:
    post:
      tags: [Orders]
      summary: 创建订单
      operationId: createOrder
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/CreateOrderDTO"
      responses:
        "200":
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/OrderVO"

  /orders/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 订单ID
    get:
      tags: [Orders]
      summary: 查询订单状态
      description: 轮询查单使用
      operationId: getOrder
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/OrderVO"

  /orders/my:
    get:
      tags: [Orders]
      summary: 我的订单列表
      operationId: listMyOrders
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/SizeParam"
        - name: status
          in: query
          description: 订单状态筛选
          schema:
            $ref: "#/components/schemas/OrderStatus"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          list:
                            type: array
                            items:
                              $ref: "#/components/schemas/OrderVO"
                          pageInfo:
                            $ref: "#/components/schemas/PageInfo"

  /orders/{id}/pay:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
        description: 订单ID
    post:
      tags: [Orders]
      summary: 发起微信支付
      description: 返回微信小程序requestPayment所需的参数
      operationId: initiatePayment
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/WechatPaymentParams"

  # ==================== 基础数据模块 ====================
  /dictionaries/schools:
    get:
      tags: [Dictionaries]
      summary: 获取学校列表
      operationId: listSchools
      security: []
      parameters:
        - name: keyword
          in: query
          description: 关键词搜索
          schema:
            type: string
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/SchoolVO"

  /dictionaries/majors:
    get:
      tags: [Dictionaries]
      summary: 获取专业/大类列表
      description: 返回树形结构或列表
      operationId: listMajors
      security: []
      parameters:
        - name: classId
          in: query
          description: 专业大类ID筛选
          schema:
            type: integer
        - name: majorKeyword
          in: query
          description: 专业关键词筛选
          schema:
            type: string
        - name: classKeyword
          in: query
          description: 专业大类关键词筛选
          schema:
            type: string
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/MajorClassVO"

  # ==================== 通用模块 ====================
  /commons/uploads:
    post:
      tags: [Commons]
      summary: 文件上传通用接口
      description: 统一上传图片，返回URL
      operationId: uploadFile
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
                  description: 上传的文件
                type:
                  type: string
                  enum: [avatar, student_cert, project]
                  description: 文件类型
      responses:
        "200":
          description: 上传成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResponse"
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          url:
                            type: string
                            description: 文件访问URL
                            example: "https://cdn.example.com/uploads/123.jpg"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Token认证

  parameters:
    PageParam:
      name: page
      in: query
      description: 页码(从1开始)
      schema:
        type: integer
        default: 1
        minimum: 1
    SizeParam:
      name: size
      in: query
      description: 每页条数
      schema:
        type: integer
        default: 10
        minimum: 1
        maximum: 100

  schemas:
    # ==================== 通用响应 ====================
    BaseResponse:
      type: object
      required: [code, message]
      properties:
        code:
          type: integer
          description: 业务状态码，200成功，其他为错误码
          example: 200
        message:
          type: string
          description: 提示信息
          example: "操作成功"

    PageInfo:
      type: object
      properties:
        page:
          type: integer
          description: 当前页码
        size:
          type: integer
          description: 每页条数
        total:
          type: integer
          format: int64
          description: 总记录数
        totalPages:
          type: integer
          description: 总页数

    # ==================== 枚举类型 ====================
    ProjectStatus:
      type: integer
      enum: [0, 1, 2, 3]
      description: |
        项目状态:
        - 0: 待审核
        - 1: 已通过/进行中
        - 2: 已驳回
        - 3: 已关闭

    ApplicationStatus:
      type: integer
      enum: [0, 1, 2]
      description: |
        申请状态:
        - 0: 待审核
        - 1: 已通过
        - 2: 已拒绝

    OliveBranchStatus:
      type: integer
      enum: [0, 1, 2, 3]
      description: |
        橄榄枝状态:
        - 0: 待处理
        - 1: 已接受
        - 2: 已拒绝
        - 3: 已忽略

    TalentStatus:
      type: integer
      enum: [0, 1]
      description: |
        人才档案状态:
        - 0: 下架
        - 1: 上架

    OrderStatus:
      type: integer
      enum: [0, 1, 2, 3]
      description: |
        订单状态:
        - 0: 待支付
        - 1: 已支付
        - 2: 已取消
        - 3: 已退款

    AuthStatus:
      type: integer
      enum: [0, 1, 2]
      description: |
        认证状态:
        - 0: 未认证
        - 1: 已认证
        - 2: 认证失败

    Direction:
      type: integer
      enum: [1, 2, 3]
      description: |
        项目方向:
        - 1: 落地
        - 2: 比赛
        - 3: 学习

    # ==================== 认证相关 ====================
    LoginResponse:
      type: object
      properties:
        token:
          type: string
          description: JWT Token
        expiresIn:
          type: integer
          description: Token过期时间(秒)
        isNewUser:
          type: boolean
          description: 是否为新注册用户
        user:
          $ref: "#/components/schemas/UserVO"

    # ==================== 用户相关 ====================
    UserVO:
      type: object
      properties:
        id:
          type: integer
        nickname:
          type: string
        avatarUrl:
          type: string
        phone:
          type: string
        email:
          type: string
        school:
          $ref: "#/components/schemas/SchoolVO"
        major:
          $ref: "#/components/schemas/MajorVO"
        grade:
          type: integer
        oliveBranchCount:
          type: integer
          description: 付费橄榄枝余额
        freeBranchUsedToday:
          type: integer
          description: 今日已用免费次数(每日重置)
        lastActiveDate:
          type: string
          format: date
          description: 最后活跃日期(用于重置免费次数)
        authStatus:
          $ref: "#/components/schemas/AuthStatus"
        authImgUrl:
          type: string
          description: 学生证认证图
        createdAt:
          type: string
          format: date-time

    UpdateUserDTO:
      type: object
      properties:
        nickname:
          type: string
          maxLength: 50
        avatarUrl:
          type: string
        phone:
          type: string
          pattern: '^1[3-9]\d{9}$'
        email:
          type: string
          format: email
        schoolId:
          type: integer
        majorId:
          type: integer
        grade:
          type: integer

    # ==================== 项目相关 ====================
    ProjectVO:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
        schoolId:
          type: integer
        schoolName:
          type: string
        direction:
          $ref: "#/components/schemas/Direction"
        memberCount:
          type: integer
        status:
          $ref: "#/components/schemas/ProjectStatus"
        promotionStatus:
          type: integer
          description: 推广状态:0-无,1-推广中,2-已结束
        promotionExpireTime:
          type: string
          format: date-time
          description: 推广结束时间
        viewCount:
          type: integer
          description: 浏览量
        createdAt:
          type: string
          format: date-time

    ProjectDetailVO:
      allOf:
        - $ref: "#/components/schemas/ProjectVO"
        - type: object
          properties:
            creator:
              $ref: "#/components/schemas/UserVO"
            viewCount:
              type: integer
              description: 浏览量
            applicationCount:
              type: integer
              description: 申请数量
            isCrossSchool:
              type: integer
              description: |
                是否跨校: 1-可以,2-不可以
            educationRequirement:
              type: integer
              description: 学历要求1-大专2-本科
            skillRequirement:
              type: string
              description: 技能要求
    CreateProjectDTO:
      type: object
      required: [name, description, memberCount]
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
        schoolId:
          type: integer
        direction:
          $ref: "#/components/schemas/Direction"
        memberCount:
          type: integer
          minimum: 1
        isCrossSchool:
          type: integer
          description: |
            是否跨校: 1-可以,2-不可以
        educationRequirement:
          type: integer
          description: 学历要求1-大专2-本科
        skillRequirement:
          type: string
          description: 技能要求

    UpdateProjectDTO:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
        direction:
          $ref: "#/components/schemas/Direction"
        memberCount:
          type: integer
          minimum: 1
        isCrossSchool:
          type: integer
          description: |
            是否跨校: 1-可以,2-不可以
        educationRequirement:
          type: integer
          description: 学历要求1-大专2-本科
        skillRequirement:
          type: string
          description: 技能要求

    ProjectPageResponse:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/ProjectVO"
        pageInfo:
          $ref: "#/components/schemas/PageInfo"

    # ==================== 项目申请相关 ====================
    ProjectApplicationVO:
      type: object
      properties:
        id:
          type: integer
        projectId:
          type: integer
        projectName:
          type: string
        applicant:
          $ref: "#/components/schemas/UserVO"
        applyReason:
          type: string
          description: 申请理由/留言
        contact:
          type: string
        status:
          $ref: "#/components/schemas/ApplicationStatus"
        replyMsg:
          type: string
          description: 队长回复
        appliedAt:
          type: string
          format: date-time

    ApplicationPageResponse:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/ProjectApplicationVO"
        pageInfo:
          $ref: "#/components/schemas/PageInfo"

    # ==================== 人才档案相关 ====================
    TalentProfileVO:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: integer
        nickname:
          type: string
        avatarUrl:
          type: string
        schoolName:
          type: string
        majorName:
          type: string
        skills:
          type: array
          items:
            type: string
        intro:
          type: string
        mbti:
          type: string
        status:
          $ref: "#/components/schemas/TalentStatus"
        isPublicContact:
          type: boolean
          description: 是否公开联系方式

    TalentProfileDetailVO:
      allOf:
        - $ref: "#/components/schemas/TalentProfileVO"
        - type: object
          properties:
            selfEvaluation:
              type: string
            projectExperience:
              type: string
            contact:
              type: string
              description: 联系方式(已建立联系时返回)

    UpsertTalentProfileDTO:
      type: object
      properties:
        skills:
          type: array
          items:
            type: string
          description: 技能标签列表
        intro:
          type: string
          description: 简介
        selfEvaluation:
          type: string
          description: 自我评价
        projectExperience:
          type: string
          description: 项目经历
        mbti:
          type: string
          maxLength: 10
        status:
          $ref: "#/components/schemas/TalentStatus"
        isPublicContact:
          type: boolean
          description: 是否公开联系方式

    TalentProfilePageResponse:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/TalentProfileVO"
        pageInfo:
          $ref: "#/components/schemas/PageInfo"

    # ==================== 橄榄枝相关 ====================
    OliveBranchVO:
      type: object
      properties:
        id:
          type: integer
        senderId:
          type: integer
          description: 发起人ID
        receiverId:
          type: integer
          description: 接收人ID
        relatedProjectId:
          type: integer
          description: 关联项目ID(若是项目邀请)
        projectName:
          type: string
          description: 项目名称
        type:
          type: integer
          description: 类型:1-人才互联,2-项目邀请
        costType:
          type: integer
          description: 消耗类型:1-免费额度,2-付费额度
        hasSmsNotify:
          type: boolean
          description: 是否购买短信通知
        sender:
          $ref: "#/components/schemas/UserVO"
        receiver:
          $ref: "#/components/schemas/UserVO"
        message:
          type: string
        status:
          $ref: "#/components/schemas/OliveBranchStatus"
        createdAt:
          type: string
          format: date-time

    SendOliveBranchDTO:
      type: object
      required: [receiverId, type]
      properties:
        receiverId:
          type: integer
          description: 接收人ID
        relatedProjectId:
          type: integer
          description: 关联项目ID(若是项目邀请)
        type:
          type: integer
          description: 类型:1-人才互联,2-项目邀请
        hasSmsNotify:
          type: boolean
          description: 是否购买短信通知
          default: false
        message:
          type: string
          description: 邀请留言

    OliveBranchPageResponse:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/OliveBranchVO"
        pageInfo:
          $ref: "#/components/schemas/PageInfo"

    # ==================== 商品相关 ====================
    ProductVO:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          description: 商品名称
        type:
          type: integer
          description: 类型:1-虚拟币,2-服务权益
        description:
          type: string
          description: 商品描述
        price:
          type: number
          format: double
          description: 商品价格
        configJson:
          type: string
          description: 配置参数(如增加多少个橄榄枝)

    # ==================== 订单相关 ====================
    OrderVO:
      type: object
      properties:
        id:
          type: integer
        productId:
          type: integer
          description: 商品ID
        productName:
          type: string
          description: 商品名称
        actualPaid:
          type: number
          format: double
          description: 实付金额
        status:
          $ref: "#/components/schemas/OrderStatus"
        wxPayNo:
          type: string
          description: 微信支付单号
        payTime:
          type: string
          format: date-time
          description: 支付时间
        createdAt:
          type: string
          format: date-time

    CreateOrderDTO:
      type: object
      required: [productId, quantity]
      properties:
        productId:
          type: integer
          description: 商品ID
        quantity:
          type: integer
          description: 购买数量
          default: 1

    WechatPaymentParams:
      type: object
      description: 微信小程序requestPayment所需参数
      properties:
        timeStamp:
          type: string
        nonceStr:
          type: string
        package:
          type: string
        signType:
          type: string
        paySign:
          type: string

    # ==================== 字典数据相关 ====================
    SchoolVO:
      type: object
      properties:
        id:
          type: integer
        schoolName:
          type: string
        schoolCode:
          type: string

    MajorVO:
      type: object
      properties:
        id:
          type: integer
        majorName:
          type: string
        classId:
          type: integer

    MajorClassVO:
      type: object
      properties:
        id:
          type: integer
        className:
          type: string
        majors:
          type: array
          items:
            $ref: "#/components/schemas/MajorVO"
